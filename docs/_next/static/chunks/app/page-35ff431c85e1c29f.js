(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8823:function(e,a,t){Promise.resolve().then(t.bind(t,4009))},4009:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return a_}});var r=t(7437),n=t(2265),o=t(9629),l=t(3226),i=t(2550);class s{static async withId(e){let a=new s(e);return await a.initialize(),a}async initialize(){this.db=await (0,i.X3)("datasets",1,{upgrade(e){e.createObjectStore("lastState",{keyPath:["datasetId","tableIndex"]}),e.createObjectStore("metadata",{keyPath:["datasetId"]})},terminated:()=>{this.initialize().catch(e=>{console.error(e)})}})}async loadDataset(){let e=this.db.transaction(["lastState","metadata"],"readonly"),a=[],t=e.objectStore("metadata").get([this.datasetId]);for await(let t of e.objectStore("lastState").iterate(IDBKeyRange.lowerBound([this.datasetId,0]))){if(t.value.datasetId!=this.datasetId)break;a.push({data:t.value.table,filename:t.value.filename})}let r=await t;if(await e.done,0!=a.length&&void 0!==r)return{...r.metadata,tables:a}}async loadDatasetOrDefault(e){let a=await this.loadDataset();if(a)return a;{let a=e();return await this.saveDataset(a),a}}async saveTable(e,a){let t=this.db.transaction("lastState","readwrite"),r=await t.store.get([this.datasetId,e]);if(!r)throw Error("Couldn't find a table to update, dataset: ".concat(this.datasetId,", index: ").concat(e));await this.db.put("lastState",{datasetId:this.datasetId,tableIndex:e,table:a,filename:r.filename})}async saveDataset(e){let a=this.db.transaction(["lastState","metadata"],"readwrite");await Promise.all(e.tables.map((e,t)=>a.objectStore("lastState").put({datasetId:this.datasetId,tableIndex:t,table:e.data,filename:e.filename}))),await a.objectStore("metadata").put({datasetId:this.datasetId,metadata:{dirname:e.dirname}}),await a.done}constructor(e){this.datasetId=e}}let d="page";var c=JSON.parse('{"directory":"../data/exceled/html_cleaned_fin_06067_0_aug1.xls","file_name":"html_cleaned_fin_06067_0_aug1.xls","num_cols":5,"num_rows":5,"table_array":[["Delinquent Date:","12/10/2017","04/10/2018","2019-12-10 00:00:00","2020-04-10 00:00:00"],["Amount:","$11,149.63","$11,149.63","11100","11200"],["Penalty:","$0.00","$0.00","$0.00","$0.00"],["Installment Amount Due:","$0.00","$0.00","$0.00","$0.00"],["Status:","Paid 12/10/2017","Paid 04/10/2018","Paid 12/10/2019","Paid 04/10/2020"]],"annotations":[["attributes","data","data","data","data"],["attributes","data","data","data","data"],["attributes","data","data","data","data"],["attributes","data","data","data","data"],["attributes","data","data","data","data"]],"header_type":"vertical","table_id":null,"url":null}'),u=JSON.parse('{"directory":"../data/exceled/html_cleaned_fin_06081_0.xls","file_name":"html_cleaned_fin_06081_0.xls","num_cols":2,"num_rows":2,"table_array":[["Improvements","13020000"],["Land","6196378"]],"annotations":[["attributes","data"],["attributes","data"]],"header_type":"vertical","table_id":null,"url":null}'),h=JSON.parse('{"directory":"../data/exceled/html_cleaned_fin_06081_1.xls","file_name":"html_cleaned_fin_06081_1.xls","num_cols":3,"num_rows":5,"table_array":[["Special Charge","Phone Number","Amount"],["SMC Mosquito Abate Dis","(800) 273-5167","3.74"],["NPDES Storm Drain Fee","(650) 363-4100","1.72"],["SMFCSD Measure A 2010 Ptax","(000) 000-0000","203.40"],["SMFCSD Measure B 1991 Ptax","(650) 312-7269","101.18"]],"annotations":[["header","header","header"],["data","data","data"],["data","data","data"],["data","data","data"],["data","data","data"]],"header_type":"vertical","table_id":null,"url":null}'),p=JSON.parse('{"directory":"../data/exceled/html_cleaned_fin_06081_3_aug4.xls","file_name":"html_cleaned_fin_06081_3_aug4.xls","num_cols":4,"num_rows":12,"table_array":[["Secured Property Tax","","",""],["Parcel","Tax Rate Area","Assessment Year","Roll Year"],["035-320-470","12-001","2015","2015"],["Owner Address","","",""],["*Name private per CA AB2238 1875 S BASCOM AVE STE 2400 CAMPBELL CA 95008-2356","","",""],["Property Location","","",""],["2000 S DELAWARE ST SAN MATEO","","",""],["Values","","",""],["Improvements","13020000","",""],["Land","6196378","",""],["Net value","$19,216,378","",""],["Legal Description","PARCEL B PARCEL MAP VOL 80/30- 31","",""]],"annotations":[["header",null,null,null],["header","header","header","header"],["data","data","data","data"],["header",null,null,null],["data",null,null,null],["header",null,null,null],["data",null,null,null],["attributes",null,null,null],["attributes","data",null,null],["attributes","data",null,null],["attributes","data",null,null],["attributes","data",null,null]],"header_type":"other","table_id":null,"url":null}'),g=JSON.parse('{"directory":"../data/exceled/html_cleaned_fin_06081_3_aug5.xls","file_name":"html_cleaned_fin_06081_3_aug5.xls","num_cols":4,"num_rows":3,"table_array":[["","Installment 1","Installment 2","Total"],["General Tax","107803.88","107803.88","$215,607.76"],["Total Special Charges","155.02","155.02","$310.04"]],"annotations":[[null,"header","header","header"],["attributes","data","data","data"],["attributes","data","data","data"],[null,null,null,null]],"header_type":"matrix","table_id":null,"url":null}'),b=JSON.parse('{"directory":"../data/exceled/html_cleaned_fin_06081_3_aug6.xls","file_name":"html_cleaned_fin_06081_3_aug6.xls","num_cols":2,"num_rows":3,"table_array":[["","Detail Special Charges"],["Improvement","13020000"],["Land","6196378"]],"annotations":[[null,"header"],["attributes","data"],["attributes","data"]],"header_type":"matrix","table_id":null,"url":null}');let m=[{data:c,filename:"html_cleaned_fin_06067_0_aug1.json"},{data:u,filename:"html_cleaned_fin_06081_0.json"},{data:h,filename:"html_cleaned_fin_06081_1.json"},{data:p,filename:"html_cleaned_fin_06081_3_aug4.json"},{data:g,filename:"html_cleaned_fin_06081_3_aug5.json"},{data:b,filename:"html_cleaned_fin_06081_3_aug6.json"}];var f=t(2074),v=t.n(f),x=t(9743),y=t.n(x),w=t(9589),k=t.n(w);async function _(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,t=await Promise.all(e.map(async e=>k()(e,{asBytes:!0}).slice(void 0,a))),r=new Uint8Array(a);for(let e of t){(0,o.strict)(r.length==e.length);for(let a=0;a<r.length;++a)r[a]^=e[a]}return[...r].map(e=>e.toString(16).padStart(2,"0")).join("")}var C=t(263).Buffer;async function E(e){return _(e.tables.map(e=>C.from(e.filename)))}async function j(e,a){let t=new(v()),r=t.folder(null!=a?a:e.dirname);for(let a of e.tables)null==r||r.file(y().basename(a.filename),JSON.stringify(a.data,void 0,4));return t.generateAsync({type:"blob"})}var S=t(1454);async function Z(e,a){let t=j(e,e.dirname+"_out");(0,S.NL)(t,{fileName:"".concat(a,".zip"),extensions:[".zip"],id:a})}async function N(){let e=await (0,S.FK)({recursive:!1,mode:"read"});if(0==e.length)throw Error("No files selected");let a=await Promise.all(e.map(async e=>{let a=await e.text(),t=JSON.parse(a);return{data:t,filename:e.name}})),t=y().basename(y().dirname(e[0].webkitRelativePath));return{tables:a,dirname:t}}var P=t(1101),O=t(2135),A=t(6500),D=t(4989),M=t(2653),R=t(8041),T=t(616),I=t(6877),W=t(9872),L=t(5795),z=t(3701),F=t(9279),H=t(8489),G=t(1347),B=t(6507),q=t(8280),V=t(817),$=t(8389),J=t(3948),X=t(1414),Y=t.n(X),K=t(1279),U=t(4686),Q=t(8573),ee=t(5743),ea=t(1251),et=t(4151),er=t(9625),en=t(1873),eo=t(3880),el=t(9566),ei=t(2746),es=t(7548),ed=t(1059),ec=t(7474),eu=t(5326);function eh(){return(eh=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function ep(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function eg(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?ep(Object(t),!0).forEach(function(a){var r;r=t[a],a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ep(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function eb(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var em,ef,ev={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ex=(e,a)=>{var t="00000000".concat((16777215&e).toString(16).toUpperCase()).substr(-6);if(!Number.isNaN(a)&&void 0!==a){var r=a.toString(16).toUpperCase();1===r.length&&(r="0".concat(r)),t+=r}return t},ey=e=>[(16711680&e)>>16,(65280&e)>>8,255&e],ew=e=>{var a=e.map(e=>{var a=e||0;return a<0&&(a=0),a>255&&(a=255),a});return a[3]<<24|a[0]<<16|a[1]<<8|a[2]},ek=e=>{if(!e||e.length<3||e.length>4)return{error:"not valid size"};var a=e.map((e,a)=>"string"==typeof e?"%"!==e[e.length-1]?Math.round(Number(e)*(3===a?255:1)):Math.round(Number(e.substring(0,e.length-1))/100*255):Math.round(3===a?255*e:e));return{format:"rgb",value:ew(a),rgb:a,alpha:a[3]}},e_=e=>{var a,t=Number("0x".concat(e.substring(1)));if(!Number.isInteger(t)||Number.isNaN(t))return{error:"Not an hex value"};var r=[];if(7===e.length||9===e.length){var n=9===e.length?8:0;r[0]=t>>16+n&255,r[1]=t>>8+n&255,r[2]=t>>n&255,9===e.length&&(a=255&t,r[3]=a,t=ew(r))}else{if(4!==e.length&&5!==e.length)return{error:"Wrong format"};var o=5===e.length?4:0;r[0]=t>>8+o&15,r[1]=t>>4+o&15,r[2]=t>>o&15,r[0]|=r[0]<<4,r[1]|=r[1]<<4,r[2]|=r[2]<<4,5===e.length&&(a=15&t,a|=a<<4,r[3]=a),t=ew(r)}return{format:"hex",value:t,rgb:r,alpha:a}},eC=e=>{var a=e;return"string"==typeof a&&(a.indexOf("deg")>-1?a=a.substr(0,a.length-3):a.indexOf("rad")>-1?a=Math.round(a.substr(0,a.length-3)*(180/Math.PI)):a.indexOf("turn")>-1&&(a=Math.round(360*a.substr(0,a.length-4))),a=parseFloat(a,10)),Number.isNaN(a)&&(a=0),a>=360&&(a%=360),a<0&&(a=0),a},eE=e=>{var a=e;return"string"==typeof a&&(a=parseFloat(a.indexOf("%")>-1?a.substring(0,a.length-1):a,10)),Number.isNaN(a)?a=0:a>100?a=100:a<0&&(a=0),a},ej=e=>{if(!e||e.length<3||e.length>4)return{error:"Not a valid size"};var a,t=eC(e[0]),r=eE(e[1]),n=eE(e[2]);e[0]=t,e[1]=r,e[2]=n;var o=(r/=100)*(1-Math.abs(2*(n/=100)-1)),l=o*(1-Math.abs(t/60%2-1)),i=n-o/2;0===r?(a=[n,n,n],i=0):a=t>=0&&t<60?[o,l,0]:t>=60&&t<120?[l,o,0]:t>=120&&t<180?[0,o,l]:t>=180&&t<240?[0,l,o]:t>=240&&t<300?[l,0,o]:[o,0,l],a[0]=Math.round(255*(a[0]+i)),a[1]=Math.round(255*(a[1]+i)),a[2]=Math.round(255*(a[2]+i));var s=e[3];return void 0!==s&&("string"==typeof s&&(s=s.indexOf("%")>-1?parseFloat(s.substring(0,s.length-1),10)/100:parseFloat(s,10)),s=Math.floor(255*s),a[3]=s),{format:"hsl",value:ew(a),rgb:a,hsl:e,alpha:s}},eS=e=>{if(!e||e.length<3||e.length>4)return{error:"Not a valid size"};var a,t=eC(e[0]),r=eE(e[1]),n=eE(e[2]);if(n*=2.55,0===r)a=[n=Math.round(n),n,n];else{t/=360,r/=100;var o=Math.floor(6*t),l=6*t-o,i=Math.round(n*(1-r)),s=Math.round(n*(1-r*l)),d=Math.round(n*(1-r*(1-l)));n=Math.round(n),a=0==(o%=6)?[n,d,i]:1===o?[s,n,i]:2===o?[i,n,d]:3===o?[i,s,n]:4===o?[d,i,n]:[n,i,s]}var c=e[3];return void 0!==c&&("string"==typeof c&&(c=c.indexOf("%")>-1?parseFloat(c.substring(0,c.length-1),10)/100:parseFloat(c,10)),c=Math.floor(255*c),a[3]=c),{format:"hsl",value:ew(a),rgb:a,hsv:e,alpha:c}},eZ=e=>{var a=e[0]/255,t=e[1]/255,r=e[2]/255,n=Math.min(a,t,r),o=Math.max(a,t,r);return{cmax:o,cmin:n,delta:o-n,r:a,g:t,b:r}},eN=e=>{var{cmin:a,cmax:t,delta:r,r:n,g:o,b:l}=eZ(e),i=0,s=0,d=(a+t)/2;0!==r&&(s=Math.round(+(100*(s=r/(1-Math.abs(2*d-1)))).toFixed(1)),(i=Math.round(60*(i=t===n?(o-l)/r%6:t===o?(l-n)/r+2:(n-o)/r+4)))<0&&(i+=360));var c=[i,s,d=Math.round(d+100*d)];return 4===e.length&&(c[3]=e[3]/255),c},eP=e=>{var{cmax:a,delta:t,r:r,g:n,b:o}=eZ(e);if(0===t)return[0,0,Math.round(100*a)];var l,i=a,s=t/a,d=(a-r)/t,c=(a-n)/t,u=(a-o)/t;return(l=(l=r===a?u-c:n===a?2+d-u:4+c-d)/6%1)<0&&(l+=1),[l=Math.round(360*l),s=Math.round(100*s),i=Math.round(100*i)]},eO=e=>{var a=e.substring(e.indexOf("(")+1,e.indexOf(")"));return a.indexOf(",")>-1?a.split(","):a.indexOf(" ")>-1?a.split(" ").filter(e=>e.length>0&&"/"!==e):void 0},eA=["plain","hex","rgb","hsl","hsv"],eD=[e=>({format:"plain",value:ev[e[0]]}),e=>e_(e[0]),e=>ek(e),e=>ej(e),e=>eS(e)],eM=[e=>({format:"plain",value:ev[e]}),e=>e_(e),e=>ek(eO(e)),e=>ej(eO(e))],eR=[e=>void 0!==ev[e],e=>e.startsWith("#"),e=>e.startsWith("rgb(")||e.startsWith("rgba("),e=>e.startsWith("hsl(")||e.startsWith("hsla(")],eT=function(e,a){var t,r,n,o,l,i,s,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u={raw:e},h=a||"unknown";if("transparent"===e)u.name=e,h="plain",r=0;else if("string"==typeof e){var p=e.trim().toLocaleLowerCase(),g=eR.findIndex(e=>e(p));g>-1&&({value:t,format:h,rgb:n,hsl:o,alpha:r,error:i}=eM[g](p),"plain"===h&&(u.name=e),h&&(u.css={backgroundColor:e}))}else if(Number.isInteger(e))t=e,h="number";else if(Array.isArray(e)&&h){var b=eA.findIndex(e=>e===h);b>-1?{value:t,format:h,rgb:n,hsl:o,hsv:l,alpha:r,error:i}=eD[b](e):i="unkown format"}else e&&"r"in e&&"g"in e&&"b"in e?(n=[e.r,e.g,e.b],e.a&&n.push(e.a),{value:t,format:h,rgb:n,alpha:r,error:i}=ek(n)):e&&"h"in e&&"s"in e&&"l"in e?(o=[e.h,e.s,e.l],e.a&&o.push(e.a),{value:t,format:h,rgb:n,hsl:o,alpha:r,error:i}=ej(o)):e&&"h"in e&&"s"in e&&"v"in e&&(l=[e.h,e.s,e.v],e.a&&l.push(e.a),{value:t,format:h,rgb:n,hsv:l,alpha:r,error:i}=eS(l));void 0===t&&(t=0,r=0===r?r:void 0,u.css={backgroundImage:"\n        linear-gradient(45deg, #ccc 25%, transparent 25%), \n        linear-gradient(135deg, #ccc 25%, transparent 25%),\n        linear-gradient(45deg, transparent 75%, #ccc 75%),\n        linear-gradient(135deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 0, 4px -4px, 0px 4px",backgroundColor:"white"},"transparent"!==e&&(h="unknown",u.name="none")),i&&(u.error=i),u.value=t,u.alpha=Number.isNaN(r)||void 0===r?1:r/255,u.format=h,d||1===u.alpha?1===u.alpha&&-16777216===u.value&&(s=255):s=Math.floor(255*u.alpha);var m=ex(t,s);return u.hex=m,n=n||ey(t),u.rgb=n,u.hsv=l||eP(n),u.hsl=o||eN(n),u.css||(u.css={backgroundColor:"#".concat(m)}),u.name||(u.name=c&&Object.keys(ev).find(e=>ev[e]===t)||"color-".concat(m)),u},eI=(e,a,t)=>{var r;return"hex"===a&&(r="#".concat(ex(e.value,t||1===e.alpha?void 0:Math.floor(255*e.alpha)))),r},eW=function(e,a,t,r){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=e,l=!1;return e&&e.format&&e.name?o.error&&t&&(o.error=t(o.error)):(o=e,t&&"string"==typeof o&&(em&&r===ef||(ef=r,em={},Object.keys(ev).forEach(e=>{em[t(e)]=e})),l=(o=em[o]||o)!==e),(o=eT(o,null,a,!n)).name&&t&&(o.translated=t(o.name),l&&o.translated&&(o.name=o.translated),o.error&&(o.error=t(o.error)))),o},eL=(0,X.oneOfType)([(0,X.shape)({css:(0,X.shape)({}),value:X.number,hex:X.string,raw:(0,X.oneOfType)([X.string,X.array,X.number,X.shape]),name:X.string,alpha:X.number,rgb:(0,X.arrayOf)(X.number),hsv:(0,X.arrayOf)(X.number),hsl:(0,X.arrayOf)(X.number)}),X.string,X.number]),ez=(0,X.objectOf)(X.string),eF=(0,X.arrayOf)(X.string),eH={use:()=>({i18n:{language:"us"},t:e=>e})},eG=e=>(e&&(eH.use=e),eH.use()),eB=(0,Q.Z)({root:{backgroundImage:e=>e.colorError||e.alpha<1?"\n    linear-gradient(45deg, #ccc 25%, transparent 25%), \n    linear-gradient(135deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(135deg, transparent 75%, #ccc 75%)":"none",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 0, 4px -4px, 0px 4px",backgroundColor:e=>e.backgroundColor||"#fff",boxShadow:"0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08)",borderColor:e=>e.borderColor||"#767676",borderStyle:"solid",borderWidth:e=>e.borderWidth||0,borderRadius:4,padding:0,width:e=>e.width,minWidth:e=>e.minWidth,height:e=>e.height,"& div":{content:'" "',background:e=>e.colorError?"repeating-linear-gradient(\n      135deg,\n      transparent,\n      transparent ".concat(e.width/2+2,"px,\n      #f44336 ").concat(e.width/2+2,"px,\n      #f44336 ").concat(e.width/2+4,"px\n    )"):"none",backgroundColor:e=>e.colorError?"transparent":e.backgroundColor||"#fff",width:e=>e.width,minWidth:e=>e.minWidth,height:e=>e.height,border:e=>e.colorError?"2px solid #f44336":"".concat(e.borderWidth||0,"px solid ").concat(e.borderColor||"#767676"),borderRadius:4,padding:0},"&:hover div":{backgroundColor:e=>e.hoverColor},"&:active":{boxShadow:"none"},"&:focus":{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.5)"}},tooltip:{width:"min-content"}}),eq=e=>{var{color:a,size:t,borderWidth:r,borderColor:o,forwardRef:l,tooltip:i,disableAlpha:s,className:d}=e,c=eb(e,["color","size","borderWidth","borderColor","forwardRef","tooltip","disableAlpha","className"]),{t:u,i18n:h}=eG(),p=eW(a,s,u,h.language),g=u(i),b=p.css,m=p.hsl[2]-10;m<30&&(m=p.hsl[2]+50);var f=p.alpha,v=eB(eg({width:t,minWidth:t,height:t,hoverColor:"hsl(".concat(p.hsl[0],", ").concat(p.hsl[1],"%, ").concat(m,"%, ").concat(f,")"),borderColor:o,borderWidth:r,alpha:f,colorError:!!p.error},b)),x=n.createElement(et.Z,eh({"data-testid":"colorbutton",className:"".concat(v.root," ").concat(null!=d?d:""),ref:l,variant:"contained","aria-label":p.name},c),n.createElement("div",null));return i?n.createElement(er.ZP,{title:g},n.createElement("div",{className:v.tooltip},x)):x};eq.propTypes={color:eL.isRequired,size:Y().number,disableAlpha:Y().bool,borderWidth:Y().number,borderColor:Y().string,tooltip:Y().string,forwardRef:Y().shape({current:Y().elementType})},eq.defaultProps={size:24,borderWidth:0,borderColor:void 0,forwardRef:void 0,tooltip:void 0,disableAlpha:!1};var eV="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;function e$(e){var a=n.useRef(e);return eV(()=>{a.current=e}),n.useCallback(function(){return(0,a.current)(...arguments)},[])}var eJ=(0,Q.Z)({root:{position:"absolute",width:"inherit",height:"inherit",background:e=>"".concat(e.cssRgb," none repeat scroll 0% 0%"),margin:0},gradientPosition:{position:"absolute",width:"100%",height:"100%"},hsvGradientS:{background:"rgba(0, 0, 0, 0) linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0)) repeat scroll 0% 0%"},hsvGradientV:{background:"rgba(0, 0, 0, 0) linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)) repeat scroll 0% 0%"},hslGradientS:{background:"rgba(0, 0, 0, 0) linear-gradient(to bottom, rgb(128, 128, 128), rgba(255, 255, 255, 0)) repeat scroll 0% 0%"},hslGradientL:{background:"rgba(0, 0, 0, 0) linear-gradient(to left, rgb(0, 0, 0), rgba(128, 128, 128, 0), rgb(255, 255, 255)) repeat scroll 0% 0%"},hsvGradientCursor:{position:"absolute",top:0,left:0,borderColor:"#f0f0f0",borderWidth:1,borderStyle:"solid",boxShadow:"rgba(0, 0, 0, 0.37) 0px 1px 4px 0px",transition:"box-shadow 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",borderRadius:4,cursor:e=>!e.pressed&&"pointer",zIndex:100,transform:"translate(-4px, -4px)","&:hover":{boxShadow:"0px 0px 0px 8px rgba(63, 81, 181, 0.16)"},"&:focus":{outline:"none !important",boxShadow:"0px 0px 0px 8px rgba(63, 81, 181, 0.16)"},"&:focus > div":{}},hsvGradientCursorC:{width:8,height:8,borderRadius:4,boxShadow:"white 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08)"}}),eX=e=>{var{className:a,color:t,onChange:r,isHsl:o}=e,l=eb(e,["className","color","onChange","isHsl"]),i=n.useRef(t),[s,d]=n.useState(!1),c=n.useRef(!1);n.useEffect(()=>{i.current=t});var u,h,p,g,b,m,f=n.useRef(),v=n.useRef(),x={x:0,y:0},y=(u=t.hsv[0]/360,h=255,p=Math.floor(6*u),b=Math.round(h*(1-(g=6*u-p))),m=Math.round(h*g),h=Math.round(h),0==(p%=6)?[h,m,0]:1===p?[b,h,0]:2===p?[0,h,m]:3===p?[0,b,h]:4===p?[m,0,h]:[h,0,b]),w="rgb(".concat(y[0],",").concat(y[1],",").concat(y[2],")"),k=eJ(eg(eg({},l),{},{cssRgb:w})),_=(e,a)=>{x=e,v.current.style.top="".concat(e.y,"px"),v.current.style.left="".concat(e.x,"px"),a&&v.current.focus()},C=e=>{if(e){var{hsv:a,hsl:r}=t;_(x={x:Math.round((o?100-r[2]:a[1])/100*(e.clientWidth-1)),y:Math.round((o?r[1]:100-a[2])/100*(e.clientHeight-1))})}};C(f.current),f.current&&(f.current.style.background="".concat(w," none repeat scroll 0% 0%"));var E=(e,a)=>{var{x:t,y:n}=e,l=a.getBoundingClientRect(),s={x:t-l.left,y:n-l.top};s.x<0&&(s.x=0),s.y<0&&(s.y=0),s.x>=a.clientWidth&&(s.x=a.clientWidth-1),s.y>=a.clientHeight&&(s.y=a.clientHeight-1),_(s,!0);var d=i.current;if(o){var c=s.y/(a.clientHeight-1)*100,u=100*(1-s.x/(a.clientWidth-1));r([d.hsl[0],c,u])}else{var h=s.x/(a.clientWidth-1)*100,p=100*(1-s.y/(a.clientHeight-1));r([d.hsv[0],h,p])}};n.useEffect(()=>{var e=f.current;C(e);var a=e=>{d(!0),c.current=!0,e.preventDefault()},t=a=>{E({x:a.pageX-window.scrollX,y:a.pageY-window.scrollY},e),c.current=!1,a.preventDefault()},r=a=>{c.current&&a.buttons&&(E({x:a.pageX-window.scrollX,y:a.pageY-window.scrollY},e),a.preventDefault())},n=a=>{E({x:a.touches[0].pageX-window.scrollX,y:a.touches[0].pageY-window.scrollY},e),a.preventDefault()};return e.addEventListener("mousedown",a),e.addEventListener("mouseup",t),e.addEventListener("mousemove",r),e.addEventListener("touchdown",a),e.addEventListener("touchup",t),e.addEventListener("touchmove",n),()=>{e.removeEventListener("mousedown",a),e.removeEventListener("mouseup",t),e.removeEventListener("mousemove",r),e.removeEventListener("touchdown",a),e.removeEventListener("touchup",t),e.removeEventListener("touchmove",n)}},[]);var j=e$(e=>{if(s){var{x:a,y:t}=x;switch(e.key){case"ArrowRight":a+=1;break;case"ArrowLeft":a-=1;break;case"ArrowDown":t+=1;break;case"ArrowUp":t-=1;break;case"Tab":return void d(!1);default:return}e.preventDefault();var r=f.current.getBoundingClientRect();E({x:a+r.left,y:t+r.top},f.current)}}),S=e$(e=>{d(!0),e.preventDefault()}),Z=e$(e=>{d(!1),e.preventDefault()});return n.createElement("div",{className:a},n.createElement("div",eh({className:k.root},l,{ref:f,"data-testid":"hsvgradient-color"}),n.createElement("div",{className:"muicc-hsvgradient-s ".concat(o?k.hslGradientS:k.hsvGradientS," ").concat(k.gradientPosition)},n.createElement("div",{className:"muicc-hsvgradient-v ".concat(o?k.hslGradientL:k.hsvGradientV," ").concat(k.gradientPosition)},n.createElement("div",{ref:v,tabIndex:"0",role:"slider","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":t.hsv[1],pressed:"".concat(c.current),"data-testid":"hsvgradient-cursor",className:"muicc-hsvgradient-cursor ".concat(k.hsvGradientCursor),onKeyDown:j,onFocus:S,onBlur:Z},n.createElement("div",{className:"muicc-hsvgradient-cursor-c ".concat(k.hsvGradientCursorC)}))))))};eX.propTypes={color:eL.isRequired,className:Y().string.isRequired,onChange:Y().func.isRequired,isHsl:Y().bool},eX.defaultProps={isHsl:!1};var eY=e=>{var{Element:a,defaultValue:t}=e,r=eb(e,["Element","defaultValue"]),[o,l]=n.useState(t);return n.createElement(a,eg(eg({},r),{},{value:o,onChange:l}))},eK=e=>{var a=a=>{var{defaultValue:t,value:r,onChange:o}=a,l=eb(a,["defaultValue","value","onChange"]);return o||"none"!==r?n.createElement(e,eg({value:r||t,onChange:o||(()=>{})},l)):n.createElement(eY,eg({Element:e,defaultValue:t},l))};return a.propTypes=eg(eg({},e.propTypes),{},{defaultValue:e.propTypes.value,onChange:Y().func}),a.defaultProps=eg(eg({},e.defaultProps),{},{defaultValue:void 0,onChange:void 0}),a},eU=(0,Q.Z)({root:{display:"flex",flexDirection:"row"},colorinputRaw:{paddingRight:4},formControl:{width:100}}),eQ=e=>{var a,t,{value:r,format:o,onChange:l,disableAlpha:i,enableErrorDisplay:s,forwardRef:d,disablePlainColor:c}=e,u=eb(e,["value","format","onChange","disableAlpha","enableErrorDisplay","forwardRef","disablePlainColor"]),h=eU(),{t:p,i18n:g}=eG(),b=eW(r,i,p,g.language,c),m=e=>{if("plain"===o)l(e.target.value);else if("hex"===o)l("#".concat(e.target.value));else{var a=e.target.id,r=Number(e.target.value),n={};Object.keys(t).forEach(e=>{var o=t[e].value;e===a&&((o=r)<t[e].min&&(o=t[e].min),o>t[e].max&&(o=t[e].max)),n[e]=o}),l(n)}},f=(e,a,t,r,o)=>n.createElement(n.Fragment,null,n.createElement(es.Z,{htmlFor:e,className:"muicc-colorinput-label","data-testid":"colorinput-label"},a),n.createElement(ed.Z,eh({id:e,name:e,className:"muicc-colorinput-input",label:a,value:t,placeholder:a,inputProps:{"aria-label":"color-".concat(a),"data-testid":"colorinput-input"},onChange:m,startAdornment:o&&r&&n.createElement(ec.Z,{position:"start"},r)},u)));if("plain"===o)a=f("color-plain","Color",b.raw);else{var v=Object.keys(t=function(e,a,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e,n=eW(e,t,r),o={};if("rgb"===a)o.r={value:n.rgb[0],format:"integer",min:0,max:255,name:r("R")},o.g={value:n.rgb[1],format:"integer",min:0,max:255,name:r("G")},o.b={value:n.rgb[2],format:"integer",min:0,max:255,name:r("B")};else if("hsv"===a)o.h={value:n.hsv[0],format:"integer",min:0,max:360,name:r("H"),unit:"\xb0"},o.s={value:n.hsv[1],format:"integer",min:0,max:100,name:r("S"),unit:"%"},o.v={value:n.hsv[2],format:"integer",min:0,max:100,name:r("V"),unit:"%"};else if("hsl"===a)o.h={value:n.hsl[0],format:"integer",min:0,max:360,name:r("H"),unit:"\xb0"},o.s={value:n.hsl[1],format:"integer",min:0,max:100,name:r("S"),unit:"%"},o.l={value:n.hsl[2],format:"integer",min:0,max:100,name:r("L"),unit:"%"};else if("hex"===a){var{hex:l}=n;n.raw&&"string"==typeof n.raw&&n.raw.startsWith("#")&&(l=n.raw.substring(1)),o.hex={value:l,format:"hex",name:r("HEX"),unit:"#"}}else o.value=r(n.value),o.format="unknown";return o}(b,o,i,p));a=n.createElement("div",{ref:d,className:h.root},v.map(e=>n.createElement(el.Z,{key:e,className:"muicc-colorinput-raw ".concat(h.colorinputRaw),error:!!b.error},f(e,t[e].name,t[e].value,t[e].unit,1===v.length))))}return n.createElement(el.Z,{className:h.formControl,error:!!b.error,"data-testid":"colorinput"},a,s&&b.error&&n.createElement(ei.Z,{id:"component-error-text"},b.error))};eQ.propTypes={value:eL,format:Y().string,onChange:Y().func.isRequired,disableAlpha:Y().bool,enableErrorDisplay:Y().bool,forwardRef:Y().shape({current:Y().elementType}),disablePlainColor:Y().bool},eQ.defaultProps={value:"none",format:"plain",forwardRef:void 0,disableAlpha:!1,enableErrorDisplay:!0,disablePlainColor:!1};var e0=eK(eQ),e1=(0,Q.Z)({root:{display:"flex",flexDirection:"row",flexWrap:"wrap",padding:"8px 0 0 8px"},paletteButton:{margin:"0 8px 8px 0",padding:0}}),e5=e=>{var{size:a,borderWidth:t,palette:r,onSelect:o,disableAlpha:l}=e,i=e1(),{t:s}=eG();return n.createElement("div",{className:i.root},Object.keys(r).map(e=>n.createElement(eq,{size:a,key:"".concat(e),color:r[e],className:"muicc-palette-button ".concat(i.paletteButton),borderWidth:t,tooltip:e,disableAlpha:l,onClick:()=>{var a;return a=s(e),void(o&&o(a,r[e]))}})))};e5.propTypes={borderWidth:Y().number,size:Y().number,palette:ez.isRequired,forwardRef:Y().shape({current:Y().elementType}),onSelect:Y().func,disableAlpha:Y().bool},e5.defaultProps={borderWidth:0,size:24,forwardRef:void 0,onSelect:void 0,disableAlpha:!1};var e2=(0,Q.Z)(()=>({root:{width:"100%",height:16,padding:0},rail:{height:16,opacity:1,background:"rgba(0, 0, 0, 0) linear-gradient(to right, rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100% ) repeat scroll 0% 0%",borderRadius:0},track:{height:16,opacity:0,borderRadius:4,backgroundColor:"transparent"},thumb:{width:16,height:16,marginTop:0,marginLeft:-8,backgroundColor:"#f0f0f0",boxShadow:"rgba(0, 0, 0, 0.37) 0px 1px 4px 0px","&:focus":{boxShadow:"0px 0px 0px 8px rgba(63, 81, 181, 0.16)"}}}));function e6(e){var a=e2();return n.createElement(eu.Z,eh({},e,{classes:{root:a.root,rail:a.rail,track:a.track,thumb:a.thumb}}))}var e3=(0,Q.Z)({root:{color:"#666",width:"100%",height:16,padding:0,background:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(135deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(135deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundColor:"white",backgroundPosition:"0 0, 4px 0, 4px -4px, 0px 4px"},rail:{height:16,opacity:1,background:e=>"rgba(0, 0, 0, 0) linear-gradient(to right, ".concat(e.color,"00 0%, ").concat(e.color," 100%) repeat scroll 0% 0%"),borderRadius:0},track:{height:16,opacity:0,borderRadius:4},thumb:{width:16,height:16,marginTop:0,marginLeft:-8,backgroundColor:"#f0f0f0",boxShadow:"rgba(0, 0, 0, 0.37) 0px 1px 4px 0px","&:focus":{boxShadow:"0px 0px 0px 8px rgba(63, 81, 181, 0.16)"}}});function e4(e){var{color:a}=e,t=eb(e,["color"]),r=e3({color:a});return n.createElement(eu.Z,eh({},t,{classes:{root:r.root,rail:r.rail,track:r.track,thumb:r.thumb}}))}e4.propTypes={color:eL.isRequired};var e8=(0,Q.Z)(e=>({root:{backgroundColor:e.palette.background.paper,position:"relative",width:"min-content",height:"min-content",padding:"0px"},container:{justifyContent:"space-around",overflow:"hidden",width:e=>e.boxWidth,padding:0},colorboxHsvGradient:{width:e=>"calc(".concat(e.boxWidth,"px - 16px)"),height:"calc(128px - 16px)",margin:8},colorboxSliders:{width:e=>e.boxWidth,padding:"8px 8px 4px 8px"},colorboxInputs:{display:"flex",flexDirection:"row",flexWrap:"wrap",padding:"8px 4px 8px 8px",justifyContent:"space-between"},colorboxInput:{},colorboxColorBg:{width:48,height:48,background:"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(135deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(135deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 0, 4px -4px, 0px 4px",backgroundColor:"white",borderRadius:4},colorboxColor:{width:48,height:48,background:e=>e.colorError?"repeating-linear-gradient(\n      135deg,\n      transparent,\n      transparent 29px,\n      #f44336 29px,\n      #f44336 32px\n    )":"none",backgroundColor:e=>e.colorError?"transparent":e.backgroundColor,borderRadius:4,border:e=>e.colorError?"2px solid #f44336":"none"},colorboxControls:{display:"flex",flexDirection:"row",flexWrap:"wrap",padding:8,"&> button":{marginLeft:"auto"}},colorboxError:{color:"#f44336",lineHeight:"36.5px"}})),e7=e=>{var a,{value:t,palette:r,inputFormats:o,deferred:l,onChange:i,disableAlpha:s,hslGradient:d}=e,c=eb(e,["value","palette","inputFormats","deferred","onChange","disableAlpha","hslGradient"]),{t:u,i18n:h}=eG(),p=eW(t,s,u,h.language),g=i;l&&([p,g]=n.useState(p),a=i);var{hsv:b,hsl:m}=p,{alpha:f}=p;f=void 0===f?100:Math.floor(100*f);var v=eI(p,"hex",!0),{backgroundColor:x}=p.css,y=e8({boxWidth:320,backgroundColor:x,colorError:!!p.error}),w=e=>{g(eT(e))};return n.createElement(en.Z,eh({p:2,className:y.root},c),n.createElement(en.Z,{className:y.container},n.createElement(eX,{className:"muicc-colorbox-hsvgradient ".concat(y.colorboxHsvGradient),color:p,onChange:e=>{g(eT(e,d?"hsl":"hsv"))},isHsl:d}),n.createElement("div",{className:"muicc-colorbox-sliders ".concat(y.colorboxSliders)},n.createElement(e6,{"data-testid":"hueslider","aria-label":"color slider",value:d?m[0]:b[0],min:0,max:360,onChange:(e,a)=>{g(eT([a,p.hsv[1],p.hsv[2]],"hsv"))}}),!s&&n.createElement(e4,{"data-testid":"alphaslider",color:v,valueLabelDisplay:"auto","aria-label":"alpha slider",value:f,min:0,max:100,onChange:(e,a)=>{g(eT([p.rgb[0],p.rgb[1],p.rgb[2],a/100],"rgb"))}})),o.length>0&&n.createElement("div",{className:"muicc-colorbox-inputs  ".concat(y.colorboxInputs)},n.createElement("div",{className:"muicc-colorbox-colorBg ".concat(y.colorboxColorBg)},n.createElement("div",{className:"muicc-colorbox-color ".concat(y.colorboxColor)})),o.map(e=>n.createElement(e0,{key:e,value:p,format:e,disableAlpha:!0,enableErrorDisplay:!1,className:"muicc-colorbox-input ".concat(y.colorboxInput),onChange:w}))),r&&n.createElement(n.Fragment,null,n.createElement(eo.Z,null),n.createElement(e5,{size:26.65,palette:r,onSelect:(e,a)=>{var t=eT(a);t.name=e,g(t)},disableAlpha:s})),n.createElement("div",{className:"muicc-colorbox-controls ".concat(y.colorboxControls)},p.error&&n.createElement("span",{className:"muicc-colorbox-error ".concat(y.colorboxError),"data-testid":"colorbox-error"},u(p.error)),l&&n.createElement(et.Z,{onClick:()=>{a(p)}},u("Set")))))};e7.propTypes={value:eL,deferred:Y().bool,palette:ez,inputFormats:eF,onChange:Y().func.isRequired,disableAlpha:Y().bool,hslGradient:Y().bool},e7.defaultProps={value:void 0,deferred:!1,palette:void 0,inputFormats:["hex","rgb"],disableAlpha:!1,hslGradient:!1};var e9=eK(e7),ae=(0,Q.Z)({root:{display:"flex",flexDirection:"row",width:"max-content"},colorpickerButton:{margin:6}}),aa=(0,ee.Z)({seed:"ColorPicker"}),at=e=>{var a,{value:t,disableTextfield:r,deferred:o,palette:l,inputFormats:i,openAtStart:s,onChange:d,onOpen:c,doPopup:u,disableAlpha:h,hslGradient:p,hideTextfield:g,disablePlainColor:b}=e,m=ae(),f=(0,n.useRef)(null),[v,x]=(0,n.useState)(!1),{t:y,i18n:w}=eG(),k=eW(t,h,y,w.language,b),_=((a=b?"color-".concat(k.hex):k.name).startsWith("color-")?a="string"==typeof k.raw&&k.raw.startsWith("#")?k.raw:eI(k,"hex"):"none"===a&&(a=k.raw),a);(0,n.useEffect)(()=>{s&&x(!0)},[s]);var C=()=>{var e=!!f.current;x(e),c&&c(e)},E=()=>{x(!1),c&&c(!1)},j=n.createElement(e9,{value:k,style:{position:"relative"},deferred:o,palette:l,inputFormats:i,disableAlpha:h,hslGradient:p,onChange:e=>{d(e),o&&E()}});j=u?u(j):n.createElement(U.ZP,{id:"color-popover",open:v,anchorEl:f.current,onClose:E,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},j);var S=null;return g||(S=r?n.createElement("div",{role:"button","data-testid":"colorpicker-noinput",onClick:C},k.raw):n.createElement(K.Z,{color:"primary",value:_,onChange:e=>{d(e.target.value)},"data-testid":"colorpicker-input"})),n.createElement(ea.ZP,{generateClassName:aa},n.createElement("div",{ref:f,className:m.root},n.createElement(eq,{"data-testid":"colorpicker-button",className:"muicc-colorpicker-button ".concat(m.colorpickerButton),color:k,onClick:C}),S,j))};at.propTypes={value:eL,disableTextfield:Y().bool,deferred:Y().bool,palette:ez,inputFormats:eF,onChange:Y().func.isRequired,onOpen:Y().func,openAtStart:Y().bool,doPopup:Y().func,disableAlpha:Y().bool,hslGradient:Y().bool,hideTextfield:Y().bool,disablePlainColor:Y().bool},at.defaultProps={value:"none",disableTextfield:!1,deferred:!1,palette:void 0,inputFormats:["hex","rgb"],onOpen:void 0,openAtStart:!1,doPopup:void 0,disableAlpha:!1,hslGradient:!1,hideTextfield:!1,disablePlainColor:!1};var ar=eK(at),an=t(9135),ao=t(8595),al=t(3202),ai=t(5173),as=t(4933),ad=t(8414),ac=t(666),au=t(9396);function ah(){return(0,r.jsx)(B.Z,{margin:"auto"})}function ap(){return(0,r.jsx)(ai.Z,{sx:{rotate:"90deg"}})}function ag(e,a,t){return e.map((e,r)=>e.map((e,n)=>!function(e,a){let{x:t,y:r}=e,n=Math.min(a[0].x,a[1].x),o=Math.max(a[0].x,a[1].x),l=Math.min(a[0].y,a[1].y),i=Math.max(a[0].y,a[1].y);return n<=t&&t<=o&&l<=r&&r<=i}({x:r,y:n},a)?e:t))}let ab=(0,ao.Z)(),am=["header","attributes","data","metadata"];function af(e){var a;let t=(0,P.Z)(),n=(0,O.Z)(t.breakpoints.down("sm"),{defaultMatches:!0}),o=(0,O.Z)(t.breakpoints.down("md"));return(0,r.jsx)(A.Z,{position:"static",children:(0,r.jsxs)(D.Z,{children:[(0,r.jsx)(M.Z,{size:"large",edge:"start",color:"inherit",sx:{mr:2},onClick:e.upload,children:(0,r.jsx)(au.Z,{})}),(0,r.jsx)(R.Z,{page:e.currentPage,count:e.pages.length,onChange:(a,t)=>e.setPage(t),siblingCount:n?1:o?2:6,boundaryCount:1,shape:"rounded",sx:{".MuiPaginationItem-ellipsis":{color:"inherit"},"& *":{flexWrap:"nowrap"},overflow:"auto"},renderItem:n=>{var o;return(0,r.jsx)(T.Z,{...n,sx:{color:"page"===n.type&&n.page&&null!==(a=null===(o=e.pages[n.page-1])||void 0===o?void 0:o.done)&&void 0!==a&&a?t.palette.text.disabled:"inherit"}})}}),(0,r.jsx)(ah,{}),(0,r.jsx)(M.Z,{color:"inherit",onClick:e.showHelp,sx:{mr:1},children:(0,r.jsx)(ac.Z,{})}),(0,r.jsx)(M.Z,{color:"inherit",onClick:e.download,children:(0,r.jsx)(al.Z,{})})]})})}function av(e){return(0,r.jsx)(I.Z,{open:e.isOpen,onClose:e.close,children:(0,r.jsx)(W.Z,{sx:{margin:"25vh auto 0 auto",maxWidth:"30em",padding:4},children:(0,r.jsxs)(an.Z,{container:!0,columnSpacing:1,rowSpacing:1,children:[(0,r.jsx)(an.Z,{xs:12,children:(0,r.jsx)(l.Z,{variant:"h4",marginBottom:2,children:"Keyboard navigation"})}),(0,r.jsxs)(an.Z,{xs:2.5,children:[(0,r.jsx)("kbd",{children:"←"}),"/",(0,r.jsx)("kbd",{children:"→"})]}),(0,r.jsx)(an.Z,{xs:9.5,children:(0,r.jsx)(l.Z,{children:"Navigate between tables"})}),(0,r.jsx)(an.Z,{xs:2.5,children:(0,r.jsx)("kbd",{children:"Space"})}),(0,r.jsx)(an.Z,{xs:9.5,children:(0,r.jsx)(l.Z,{children:"Go to the next not marked page"})}),(0,r.jsxs)(an.Z,{xs:2.5,children:[(0,r.jsx)("kbd",{children:"Alt"})," + click"]}),(0,r.jsx)(an.Z,{xs:9.5,children:(0,r.jsx)(l.Z,{children:"Start editing text in a table cell"})}),(0,r.jsx)(an.Z,{xs:2.5,children:(0,r.jsx)("kbd",{children:"?"})}),(0,r.jsx)(an.Z,{xs:9.5,children:(0,r.jsx)(l.Z,{children:"Show this help"})})]})})})}function ax(e){var a,t;let[o,l]=n.useState({start:void 0,end:void 0}),i=e.tableData.annotations,s=(e,a)=>{l({start:{x:e,y:a},end:{x:e,y:a}})},d=(e,a)=>{l({start:o.start,end:{x:e,y:a}})},c=()=>{l({start:void 0,end:void 0})},u=()=>{o.start&&o.end&&e.setAnnotations(ag(i,[o.start,o.end],e.paintType)),c()},h=o.start&&o.end?ag(i,[o.start,o.end],e.paintType):i;return(0,r.jsx)(L.Z,{component:W.Z,sx:{maxWidth:"fit-content"},onMouseUp:u,children:(0,r.jsx)(z.Z,{children:(0,r.jsx)(F.Z,{children:e.tableData.table_array.map((n,o)=>(0,r.jsx)(H.Z,{sx:{"& > td":{borderRight:"1px solid",borderBottom:"1px solid",borderColor:"divider"},"&:last-child > td":{borderBottom:0}},children:n.map((n,l)=>(0,r.jsx)(G.Z,{sx:{background:null!==(t=e.colors[null!==(a=h[o][l])&&void 0!==a?a:""])&&void 0!==t?t:"white"},onMouseDown:e=>{0===e.button?e.altKey?e.currentTarget.setAttribute("contenteditable","true"):(e.preventDefault(),document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),s(o,l)):c()},onMouseEnter:e=>{1&e.buttons?d(o,l):u()},onKeyDown:e=>{e.stopPropagation(),("Enter"==e.key||"Escape"==e.key)&&e.currentTarget.blur()},suppressContentEditableWarning:!0,onBlur:a=>{a.currentTarget.setAttribute("contenteditable","false"),e.setCellContent(o,l,a.currentTarget.innerText)},children:n},l))},o))})})})}function ay(e){let[a,t]=n.useState(am[0]),o=a=>{let t={...e.table,header_type:null!=a?a:"other"};a?e.setTableDataAndProceed(t):e.setTableData(t)};return(0,r.jsx)(B.Z,{padding:4,children:(0,r.jsx)(q.Z,{children:(0,r.jsxs)(an.Z,{container:!0,spacing:2,alignItems:"stretch",width:1,children:[(0,r.jsx)(an.Z,{width:"100%",children:(0,r.jsx)(ax,{tableData:e.table,setAnnotations:a=>{e.setTableData({...e.table,annotations:a})},setCellContent:(a,t,r)=>{e.setTableData({...e.table,table_array:e.table.table_array.map((e,n)=>e.map((e,o)=>n==a&&o==t?r:e))})},paintType:a,colors:e.colors})}),(0,r.jsx)(an.Z,{children:(0,r.jsx)(V.Z,{value:a,onChange:(e,a)=>t(a),exclusive:!0,color:"primary",orientation:"vertical",children:am.map(a=>(0,r.jsxs)($.Z,{value:a,sx:{justifyContent:"left",textTransform:"inherit"},children:[(0,r.jsx)(ar,{disableAlpha:!0,hideTextfield:!0,value:e.colors[a],onChange:t=>{var r;e.setColors({...e.colors,[a]:null!==(r=t.css.backgroundColor)&&void 0!==r?r:"white"})}}),(0,r.jsx)(l.Z,{component:"span",fontFamily:"monospace",variant:"body1",sx:{marginLeft:1},children:a})]},a))})}),(0,r.jsx)(an.Z,{children:(0,r.jsxs)(V.Z,{value:e.table.header_type,onChange:(e,a)=>o(a),exclusive:!0,color:"primary",children:[(0,r.jsx)($.Z,{value:"horizontal",children:(0,r.jsx)(ai.Z,{})}),(0,r.jsx)($.Z,{value:"vertical",children:(0,r.jsx)(ap,{})}),(0,r.jsx)($.Z,{value:"matrix",children:(0,r.jsx)(as.Z,{})}),(0,r.jsx)($.Z,{value:"trash",children:(0,r.jsx)(ad.Z,{})})]})})]})})})}function aw(e){let a=e.page-1,[t,o]=n.useState(e.dataset.tables[a].data),[l,i]=n.useState(!1),s=e.dataset.tables.map(e=>{var a;return{done:"other"!=(a=e.data).header_type||!!a.annotations&&void 0!=a.annotations.find(e=>void 0!=e.find(e=>e))}}),d=r=>{e.saveTable(a,t),e.setPage(r)};return window.onkeydown=t=>{if("ArrowRight"==t.code)d(e.page%s.length+1);else if("ArrowLeft"==t.code)d((e.page+s.length-2)%s.length+1);else if("Space"==t.code){let e;d((-1!=(e=s.slice(a+1).findIndex(e=>!e.done))?e+=a+1:e=s.slice(0,a).findIndex(e=>!e.done),-1==e&&(e=a),e+1))}else"?"==t.key?i(!l):"Escape"==t.code&&i(!1)},(0,r.jsxs)(J.Z,{theme:ab,children:[(0,r.jsx)(af,{pages:s,currentPage:e.page,setPage:d,download:()=>{e.saveAndDownload(a,t)},upload:e.upload,showHelp:()=>i(!0)}),(0,r.jsx)(ay,{table:t,colors:e.colors,setColors:e.setColors,setTableData:o,setTableDataAndProceed:t=>{e.saveTable(a,t),e.setPage(e.page%s.length+1),o(t)}}),(0,r.jsx)(av,{isOpen:l,close:()=>i(!1)})]})}let ak={header:"lightsteelblue",attributes:"#f3e8ff",data:"#dcfce7",metadata:"lightgoldenrodyellow"};function a_(){let[e,a]=n.useState(),[t,i]=n.useState(),[c,u]=n.useState(),[h,p]=n.useState(1),[g,b]=n.useState(!1),[f,v]=n.useState(ak);(0,n.useEffect)(()=>{(async()=>{let e,t,r;let n=function(){var e,a;let t=new URL(document.location.href).searchParams;return{page:t.has(d)&&null!==(e=function(e){let a=Number(e);return isFinite(a)?a:void 0}(t.get(d)))&&void 0!==e?e:void 0,datasetHash:null!==(a=t.get("d"))&&void 0!==a?a:void 0}}();try{n.datasetHash?(t=n.datasetHash,e=await s.withId(t),r=await e.loadDataset(),console.log("Loaded dataset ".concat(t,":"),r)):(r={tables:function(){let e=[...m];return e.forEach(e=>{void 0==e.data.header_type&&(e.data.header_type="other")}),e}(),dirname:"sample"},t=await E(r),e=await s.withId(t),await e.saveDataset(r))}catch(e){console.error(e)}if(r){var o;i(e),u(r),a(t),p(null!==(o=n.page)&&void 0!==o?o:1)}else b(!0)})()},[]),(0,n.useEffect)(()=>{e&&function(e){let a=[...e.datasetHash?["".concat("d","=").concat(e.datasetHash)]:[],...e.page?["".concat(d,"=").concat(e.page)]:[]];document.title="Table Markup | ".concat(e.datasetHash),history.state&&!history.state.__NA&&history.state.datasetHash!=e.datasetHash?history.pushState(e,"","/?".concat(a.join("&"))):history.replaceState(e,"","/?".concat(a.join("&")))}({page:h,datasetHash:e})},[e,h]);let x=(e,a)=>{(0,o.strict)(void 0!=t),(0,o.strict)(void 0!=c),t.saveTable(e,a).catch(console.error);let r=c.tables.map((t,r)=>r==e?{data:a,filename:t.filename}:t);return{...c,tables:r}},y=async()=>{let e=await N(),t=await E(e),r=await s.withId(t),n=await r.loadDataset();n?console.log("Found saved dataset",t):(n=e,await r.saveDataset(e)),u(n),a(t),i(r),p(1)};return(0,r.jsxs)(r.Fragment,{children:[c&&(0,r.jsx)(aw,{dataset:c,saveTable:(e,a)=>{u(x(e,a))},page:h,setPage:p,saveAndDownload:(a,t)=>{(0,o.strict)(void 0!=e);let r=x(a,t);u(r),Z(r,e)},upload:y,colors:f,setColors:v},"".concat(e,"-").concat(h)),g&&(0,r.jsx)(l.Z,{align:"center",variant:"h3",padding:2,children:"Dataset not found"})]})}}},function(e){e.O(0,[348,971,596,744],function(){return e(e.s=8823)}),_N_E=e.O()}]);